<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openrecord-dev] Re: [Rails-spinoffs] Integrating script.aculo.us into existing javascript codebase
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openrecord-dev/2005-July/index.html" >
   <LINK REL="made" HREF="mailto:openrecord-dev%40lists.berlios.de?Subject=Re%3A%20%5Bopenrecord-dev%5D%20Re%3A%20%5BRails-spinoffs%5D%20Integrating%20script.aculo.us%20into%20existing%20javascript%20codebase&In-Reply-To=%3CC9D7BAEB-EA8C-47E8-B498-57EC4CD12F89%40osafoundation.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000189.html">
   <LINK REL="Next"  HREF="000190.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openrecord-dev] Re: [Rails-spinoffs] Integrating script.aculo.us into existing javascript codebase</H1>
    <B>Chih-Chao Lam</B> 
    <A HREF="mailto:openrecord-dev%40lists.berlios.de?Subject=Re%3A%20%5Bopenrecord-dev%5D%20Re%3A%20%5BRails-spinoffs%5D%20Integrating%20script.aculo.us%20into%20existing%20javascript%20codebase&In-Reply-To=%3CC9D7BAEB-EA8C-47E8-B498-57EC4CD12F89%40osafoundation.org%3E"
       TITLE="[openrecord-dev] Re: [Rails-spinoffs] Integrating script.aculo.us into existing javascript codebase">chao at osafoundation.org
       </A><BR>
    <I>Sat Jul  9 20:53:00 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000189.html">[openrecord-dev] Re: [Rails-spinoffs] Integrating script.aculo.us into existing javascript codebase
</A></li>
        <LI>Next message: <A HREF="000190.html">[openrecord-dev] Item.getValue()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#187">[ date ]</a>
              <a href="thread.html#187">[ thread ]</a>
              <a href="subject.html#187">[ subject ]</a>
              <a href="author.html#187">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Thomas,

Thanks for the link. Glad to know other people are encountering the  
issue and we're working towards more compatbility.

I'm going to try to use Object.extend() instead of  
Object.prototype.extend() in the prototype.js and script.aculo.us  
libraries and see if I can get script.aculo.us up and running on  
OpenRecord, just as an experiment to see how to integrate the two  
projects.

I'll let you know how it goes.

Thanks,
chao


On Jul 9, 2005, at 1:08 AM, Thomas Fuchs wrote:

&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> There some additional discussion on this going on here:
</I>&gt;<i> <A HREF="http://sourceforge.net/forum/forum.php?">http://sourceforge.net/forum/forum.php?</A> 
</I>&gt;<i> thread_id=1315559&amp;forum_id=379297
</I>&gt;<i>
</I>&gt;<i> I think it's all working towards more compatibility.
</I>&gt;<i>
</I>&gt;<i> Thomas
</I>&gt;<i>
</I>&gt;<i> Am 09.07.2005 um 03:26 schrieb Chih-Chao Lam:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Thomas,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks for your informative response.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think the way prototype.js extends (no pun intended) the Object  
</I>&gt;&gt;<i> class is way cool, but I'm worried about existing and future  
</I>&gt;&gt;<i> compatibility, especially since prototype.js is meant to be a  
</I>&gt;&gt;<i> library used by many apps, and thus need to co-exist with many  
</I>&gt;&gt;<i> other code bases.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The real problem lies in the fact that Javascript doesn't allow  
</I>&gt;&gt;<i> for non-enumerable user-defined properties. But by extending  
</I>&gt;&gt;<i> Object, this not only causes a problem with the for/in loop for  
</I>&gt;&gt;<i> Arrays, but it also causes unexpected behavior for Objects used as  
</I>&gt;&gt;<i> associated arrays or HashMaps. We use this quite extensively in  
</I>&gt;&gt;<i> our Javascript code. It's kind of weird that the extend function  
</I>&gt;&gt;<i> copies the extend property, every-time the Object.extend()  
</I>&gt;&gt;<i> function is invoked.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Can you think of ways we could continue to use Object's as  
</I>&gt;&gt;<i> HashMaps while still co-existing with prototype.js?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alternatively, do you think Sam and others would mind if we  
</I>&gt;&gt;<i> modified prototype.js to better co-exist with existing Javascript  
</I>&gt;&gt;<i> code?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks a lot!
</I>&gt;&gt;<i> chao
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Jul 8, 2005, at 2:13 PM, Thomas Fuchs wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> With prototype is probably a bad idea to iterate through an Array  
</I>&gt;&gt;&gt;<i> with for/in.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> for(var i=0;i&lt;anArray.length;i++) {
</I>&gt;&gt;&gt;<i>     /* do something with anArray[i]  */
</I>&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> should do fine. There might be addtional additions (whew) to  
</I>&gt;&gt;&gt;<i> Object (and thus Array) and to other basic js object itself
</I>&gt;&gt;&gt;<i> in the future, i guess. sam stephenson, the author of  
</I>&gt;&gt;&gt;<i> prototype.js, is currently working on some nice stuff, i hear.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> One example is a .inspect() function:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Object.prototype.inspect = function(){
</I>&gt;&gt;&gt;<i>   var info = [];
</I>&gt;&gt;&gt;<i>   for(property in this)
</I>&gt;&gt;&gt;<i>     if(typeof this[property]!=&quot;function&quot;)
</I>&gt;&gt;&gt;<i>       info.push(property + ' =&gt; &quot;' + this[property] + '&quot;');
</I>&gt;&gt;&gt;<i>   return (&quot;'&quot; + this + &quot;' #&quot; + typeof this +
</I>&gt;&gt;&gt;<i>     &quot;: {&quot; + info.join(&quot;, &quot;) + &quot;}&quot;);
</I>&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> will allow you to get info on any js object by doing something  
</I>&gt;&gt;&gt;<i> like alert(myObject.inspect())
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Currently prototype adds functions to Array (push), Function  
</I>&gt;&gt;&gt;<i> (apply,bind,bindAsEventListener) and String (stripTags,  
</I>&gt;&gt;&gt;<i> escapeHTML, unescapeHTML) to make life easier and cut down on  
</I>&gt;&gt;&gt;<i> code size and repetitions.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> Thomas
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Am 08.07.2005 um 21:39 schrieb Chih-Chao Lam:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I'm new to this mailing list, so first off, a big THANK YOU for  
</I>&gt;&gt;&gt;&gt;<i> the script.aculo.us and prototype.js libraries.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I'm trying to integrate script.aculo.us into an existing pretty  
</I>&gt;&gt;&gt;&gt;<i> large Javascript codebase (see <A HREF="http://openrecord.org">http://openrecord.org</A>). I'm  
</I>&gt;&gt;&gt;&gt;<i> running into a problem with prototype.js and the existing  
</I>&gt;&gt;&gt;&gt;<i> codebase's use of for/in loops over an Array.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> prototype.js defines Object.prototype.extend as a function. I  
</I>&gt;&gt;&gt;&gt;<i> believe this causes a problem when I do a &quot;for/in&quot; loop on an  
</I>&gt;&gt;&gt;&gt;<i> array e.g.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> var anArray = [1,2,3]
</I>&gt;&gt;&gt;&gt;<i>  for (var key in anArray) {/*do some stuff */}
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Above code snippet doesn't quite work, because var key gets set  
</I>&gt;&gt;&gt;&gt;<i> to &quot;0&quot;, &quot;1&quot;, &quot;2&quot; and then &quot;extend&quot; in one of the loop traversal.  
</I>&gt;&gt;&gt;&gt;<i> I believe that's because prototype.js defines  
</I>&gt;&gt;&gt;&gt;<i> object.prototype.extend as a function.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Is this a known problem? Are there workarounds?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Is the use of for/in loop traversal over an Array considered  
</I>&gt;&gt;&gt;&gt;<i> verboten?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Also, looking at prototype.js. In the Object.extend() function,  
</I>&gt;&gt;&gt;&gt;<i> should the variable &quot;prototype&quot; be declared as a local variable  
</I>&gt;&gt;&gt;&gt;<i> rather than a global?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Thanks a lot!
</I>&gt;&gt;&gt;&gt;<i> Chao Lam
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> Rails-spinoffs mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openrecord-dev">Rails-spinoffs at lists.rubyonrails.org</A>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.rubyonrails.org/mailman/listinfo/rails-spinoffs">http://lists.rubyonrails.org/mailman/listinfo/rails-spinoffs</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000189.html">[openrecord-dev] Re: [Rails-spinoffs] Integrating script.aculo.us into existing javascript codebase
</A></li>
	<LI>Next message: <A HREF="000190.html">[openrecord-dev] Item.getValue()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#187">[ date ]</a>
              <a href="thread.html#187">[ thread ]</a>
              <a href="subject.html#187">[ subject ]</a>
              <a href="author.html#187">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openrecord-dev">More information about the openrecord-dev
mailing list</a><br>
</body></html>
